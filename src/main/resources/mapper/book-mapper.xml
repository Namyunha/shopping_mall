<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="Book">
    <insert id="save" parameterType="book" useGeneratedKeys="true" keyProperty="id">
        insert into book_table(bookName, unitPrice, unitsInStock, author, descript, publisher, category, conditions, fileAttached)
        values (#{bookName}, #{unitPrice}, #{unitsInStock}, #{author}, #{descript}, #{publisher}, #{category}, #{conditions}, #{fileAttached})
    </insert>

    <insert id="saveFile" parameterType="bookFile">
        insert into book_file_table(originalFileName, storedFileName, bookId)
        values (#{originalFileName}, #{storedFileName}, #{bookId})
    </insert>

    <select id="selectList" resultType="books">
        select * from book_file_table f, book_table b where f.bookId = b.id;
    </select>
<!--    select * from emp, dept where emp.deptno = dept.deptno;-->
    <select id="selectOne" parameterType="Long" resultType="book">
        select * from book_table where id=#{bookId};
    </select>

    <select id="selectFile" parameterType="Long" resultType="bookFile">
        select * from book_file_table where bookId=#{id};
    </select>

</mapper>














